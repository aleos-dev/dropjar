<!-- src/main/resources/templates/sign-up.html -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/fragments/head :: head ('Sign Up')}"></head>

<body class="d-flex flex-column min-vh-100">
<!-- Include Header -->
<div th:replace="~{/fragments/header :: header}"></div>

<!-- Main Content -->
<main class="flex-fill d-flex justify-content-center align-items-center p-3">
    <div class="signup-container bg-light bg-opacity-75 p-4 rounded">
        <h2 class="mb-4">Sign Up</h2>

        <!-- Feedback Messages -->
        <div th:if="${error}" class="alert alert-danger" role="alert">
            <p th:text="${error}"></p>
        </div>

        <form th:action="@{/auth/sign-up}" th:object="${signUpPayload}" method="post" novalidate>
<!--  TODO:          &lt;!&ndash; CSRF Token &ndash;&gt;-->
<!--                 <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->

            <div class="form-group">
                <label for="firstname">Firstname:</label>
                <input type="text" id="firstname" th:field="*{firstname}" class="form-control" required
                       aria-describedby="firstnameHelp">
                <div class="invalid-feedback">
                    Please enter your firstname.
                </div>
            </div>

            <div class="form-group">
                <label for="lastname">Lastname:</label>
                <input type="text" id="lastname" th:field="*{lastname}" class="form-control" required aria-describedby="lastnameHelp">
                <div class="invalid-feedback">
                    Please enter your lastname.
                </div>
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" th:field="*{email}" class="form-control"
                       required aria-describedby="emailHelp">
                <div class="invalid-feedback">
                    Please enter a valid email address.
                </div>
            </div>

            <div class="form-group position-relative">
                <label for="password" data-bs-toggle="tooltip" data-bs-placement="right"
                       title="Your password must be at least 3 characters long and include both letters and numbers.">Password:</label>
                <div class="input-group">
                    <input type="password" id="password" th:field="*{password}" class="form-control" required
                           aria-describedby="passwordHelp">
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword">
                        <i class="bi bi-eye-slash" id="togglePasswordIcon"></i>
                    </button>
                </div>
                <div id="passwordHelp" class="form-text">Your password must be at least 3 characters long and include
                    both letters and numbers.</div>
                <div class="invalid-feedback">
                    Please provide a valid password.
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" class="form-control" required
                       aria-describedby="confirmPasswordHelp">
                <div class="invalid-feedback">
                    Please confirm your password.
                </div>
            </div>

            <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger" role="alert">
                <ul>
                    <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
                </ul>
            </div>

            <button type="submit" class="btn btn-primary">Sign Up</button>
        </form>

        <div class="mt-3 text-center">
            <p>Already have an account? <a th:href="@{/auth/sign-in}">Sign in here</a></p>
        </div>
    </div>
</main>

<!-- Include Footer -->
<div th:replace="~{/fragments/footer :: footer}"></div>

<!-- Include Bootstrap JS and External JS Files -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/password.js"></script>
<script src="/static/js/form-validation.js"></script>
</body>
</html>
