<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/fragments/head :: head ('Sign In')}"></head>
<link rel="stylesheet" th:href="@{/resources/css/styles.css}">
<link rel="stylesheet" th:href="@{/resources/css/auth.css}">

<body class="d-flex flex-column min-vh-100">
<!-- Include Header -->
<div th:replace="~{/fragments/header :: header}"></div>


<!-- Main Content -->
<main class="flex-fill d-flex justify-content-center align-items-center">
    <div class="signin-container bg-light bg-opacity-75 p-4 rounded">
        <h2 class="mb-4">Sign In</h2>

        <div th:if="${message}" class="alert alert-info">
            <p th:text="${message}"></p>
        </div>

        <div th:if="${errorMessage}" class="alert alert-warning">
            <p th:text="${errorMessage}"></p>
        </div>

        <form th:action="@{/auth/sign-in}" method="post">
            <div class="form-group">
                <label for="email" class="form-label">Email:</label>

                <input type="email"
                       th:value="${email != null ? email : (#ctx.session.login != null ? #ctx.session.login : '')}"
                       id="email"
                       name="email"
                       class="form-control"
                       aria-required="true" required>
            </div>
            <div class="form-group">
                <label for="password" class="password-label">Password:</label>
                <input type="password" id="password" name="password" class="form-control" aria-required="true" required>
            </div>

            <div th:if="${param.error}">
                <p class="text-danger">Invalid username or password.</p>
            </div>
            <div th:if="${param.logout}">
                <p class="text-success">You have been logged out.</p>
            </div>

            <button type="submit" class="btn btn-primary">Sign In</button>
        </form>

        <div class="mt-3 text-center">
            <p>Don't have an account? <a th:href="@{/auth/sign-up}">Sign up here</a></p>
        </div>
    </div>
</main>

<!-- Include Footer -->
<div th:replace="~{/fragments/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Initialize Tooltips -->
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    tooltipTriggerList.forEach(function (tooltipTriggerEl) {
        new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>
</body>
</html>
